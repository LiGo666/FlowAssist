# FlowAssist Sample Use Case: Allianz Workplace IT Orchestrator

This document outlines a detailed use case demonstrating how the FlowAssist orchestrator can transform IT support and workplace technology experiences for Allianz employees.

## Intelligent IT Support Assistant for Allianz Workplace

### Overview

The FlowAssist orchestrator serves as a context-aware, user-centric AI control system designed to resolve workplace IT issues through natural interaction, structured reasoning, dynamic tool usage, and transparent system guidance. It operates as the cognitive backbone of the Allianz IT support platform, extensible by tools, agents, and memory modules.

### Business Value

- Reduce mean time to resolution (MTTR) for common IT issues by 60%
- Decrease IT support ticket volume by 40% through self-service resolution
- Improve employee satisfaction with IT services by 30%
- Free up IT specialists to focus on strategic initiatives rather than routine issues
- Generate data-driven insights to proactively address recurring problems

### Components Used

- **Next.js Frontend**: Employee-facing support portal and IT staff dashboard
- **MCP Server**: Orchestrates AI interactions and support workflows
- **TraceViewer**: Visualizes AI decision-making processes for complex cases
- **Analytics Service**: Tracks support metrics and identifies improvement opportunities
- **n8n**: Automates ticket routing, escalations, and remediation workflows
- **Ollama**: Powers the AI assistant for natural language issue diagnosis
- **Qdrant**: Stores knowledge base articles, previous solution vectors, and user context
- **PostgreSQL**: Maintains ticket history, user profiles, and device inventory
- **Redpanda**: Handles real-time event streaming between services
- **Grafana**: Visualizes support metrics and SLA compliance

## Orchestrator Capabilities in Action

### üß© Input Channels & User Expression

When an Allianz employee encounters an IT issue, they can interact with the system through multiple input channels:

1. **Text Input**: Employee types their issue in natural language through the Next.js frontend chat interface [processed by MCP Server]
   
   *Example:* "I can't access my SAP dashboard after the system update yesterday"

2. **Voice Input**: Employee describes the issue verbally through their device microphone [transcribed via MCP Server's ASR integration]
   
   *Example:* Recording explaining VPN connection problems while working remotely

3. **File Attachments**: Employee uploads relevant logs or documents [parsed by Analytics Service]
   
   *Example:* System logs showing failed connection attempts

4. **Screenshots/Images**: Employee captures and shares error messages or visual issues [processed by MCP Server's OCR capabilities]
   
   *Example:* Screenshot of SAP error message

Each input is indexed and structured in Qdrant [vector database] and fed into the orchestrator's context and planning logic.

### üí¨ Conversational Understanding & Clarification

Before proceeding with issue resolution, the orchestrator ensures shared understanding:

1. **Summarization**: "I understand you're having trouble accessing your SAP dashboard after yesterday's system update. Is that correct?" [generated by MCP Server]

2. **Clarifying Questions**: The system proactively asks for additional context [via Next.js UI components]:
   - "Are you able to log in to other company systems?" [Yes/No confirmation]
   - "Which of these error messages are you seeing?" [Multiple-choice options]
   - "Please describe what happens when you try to access SAP" [Free-text refinement]

3. **Confirmation Loop**: The system confirms understanding before proceeding [TraceViewer logs this decision point]

### üß† Persona & Preference Context (User Modeling)

The orchestrator loads or generates a user persona context for tailored responses:

1. **User Profile Loading**: System queries Entra ID and ServiceNow via MCP Server API to retrieve:
   - Employee role (Claims Processor, Financial Analyst, IT Coordinator)
   - Department (Insurance, Finance, IT)
   - Technical familiarity level
   - Previous support interactions

2. **Communication Preferences**: System adapts based on stored preferences [from Qdrant]:
   - Preferred tone (formal, friendly, concise)
   - Technical language level (basic, intermediate, advanced)
   - Verbosity preference (detailed explanations vs. quick solutions)

3. **Contextual Adaptation**: Response style, tool behavior, and explanation depth are adjusted based on the user model [MCP Server applies these parameters to LLM prompts]

### üîç Contextual Tool/Agent Discovery

For each support request, the orchestrator:

1. **Capability Discovery**: Queries the global capability index [stored in Qdrant] to find relevant tools:
   - For SAP issues: SAP Diagnostics Tool, Permission Checker
   - For VPN problems: Network Diagnostics, Certificate Manager
   - For account issues: Identity Management Tools

2. **Value Assessment**: Evaluates which tools add the most value to the current issue [Analytics Service provides historical success metrics]

3. **Dynamic Expansion**: Extends the action space available to the LLM planner [MCP Server] or rule-based router [n8n workflows]

## Detailed Workflow Example: SAP Access Issue

### 1. Input & Intent Understanding

1. An insurance claims processor submits: "After the system update, I can't access the claims processing dashboard in SAP. I get an error about missing authorizations." [Next.js frontend captures text input]

2. The orchestrator:
   - Parses the natural language input [MCP Server]
   - Recognizes the intent as "SAP access problem" [MCP Server classifies intent]
   - Identifies key entities: "claims processing dashboard", "SAP", "missing authorizations" [MCP Server entity extraction]
   - Determines high priority due to impact on claims processing [Analytics Service priority scoring]

3. The system loads user context [Qdrant retrieval]:
   - Role: Claims Processor in Property Insurance
   - Technical level: Intermediate
   - Previous issues: Had similar authorization problems 3 months ago
   - Communication preference: Concise, step-by-step instructions

### 2. Conversation & Clarification

1. The orchestrator responds: "I understand you're having trouble accessing the claims processing dashboard in SAP after an update, with an error about missing authorizations. Is this correct?" [Next.js UI displays confirmation]

2. Upon confirmation, it asks clarifying questions:
   - "Can you access other parts of SAP, or is it only the claims dashboard?" [Next.js UI multiple choice]
   - "Are colleagues in your team experiencing the same issue?" [Yes/No UI component]
   - "Could you share a screenshot of the exact error message?" [File upload component]

3. The employee uploads a screenshot showing "Authorization Object S_TCODE missing" [MCP Server OCR processes the image]

### 3. Contextual Reasoning

1. The orchestrator builds context using:
   - Short-term memory of the conversation [Redis cache]
   - Long-term memory of previous similar issues [Qdrant vector search]
   - System change logs showing yesterday's SAP role updates [PostgreSQL query]
   - Current SAP system status [external API call via MCP Server]

2. It structures the user's goal: "Regain access to SAP claims processing dashboard by resolving authorization issue" [TraceViewer shows this reasoning step]

3. The system identifies a pattern: Several claims processors experienced similar issues after the update [Analytics Service pattern recognition]

### 4. Tool & Agent Planning

1. The orchestrator develops a resolution plan [MCP Server LLM-based planning]:
   - Check SAP system status [SAP Status API]
   - Verify user permissions in SAP [SAP Authorization Tool]
   - Compare current permissions with pre-update state [PostgreSQL historical data]
   - Determine if this is an individual issue or team-wide problem [Analytics Service]

2. It discovers relevant tools via capability index [Qdrant search]:
   - SAP Authorization Diagnostic Tool
   - Role Assignment Manager
   - Automated Permission Request Workflow

3. The system simulates the plan execution [TraceViewer dry run] and determines:
   - High probability (85%) that the issue is due to missing role assignment
   - Medium probability (60%) that it can be resolved automatically
   - Low risk of solution side effects

### 5. Execution Control

1. The orchestrator executes the plan:
   - Checks SAP system status: Operational [external API call]
   - Verifies user permissions: Missing S_TCODE authorization [SAP API via MCP Server]
   - Identifies the exact missing role: "ZCLAIMS_PROCESSOR_EXTENDED" [SAP API query]
   - Determines this is affecting all claims processors in the department [Analytics Service]

2. Based on findings, it initiates an n8n workflow [n8n automation]:
   - Creates a high-priority ticket in ServiceNow
   - Assigns to SAP Authorization Team
   - Includes all diagnostic information
   - Sets 2-hour SLA due to business impact

3. Simultaneously, it offers a temporary workaround [Next.js UI]:
   - Instructions to access claims via alternative SAP transaction
   - Link to web-based claims processing portal as backup

### 6. Feedback, Oversight, and Improvement

1. The orchestrator maintains traceability [TraceViewer]:
   - Records all decisions and their rationale
   - Logs all API calls and their responses
   - Documents the complete conversation flow

2. It collects feedback from the employee [Next.js UI feedback component]:
   - Whether the workaround was helpful
   - Satisfaction with the support experience
   - Any additional information for the support team

3. The system updates its knowledge base [Qdrant and PostgreSQL]:
   - Adds this case to similar authorization issues
   - Updates success rate metrics for the workaround
   - Flags the SAP update as potentially problematic for future reference

4. For continuous improvement [Analytics Service]:
   - Analyzes resolution time and effectiveness
   - Identifies potential process improvements
   - Updates recommendation algorithms based on outcome

## Additional Allianz Use Cases

### Remote Work VPN Connectivity

A financial analyst working remotely cannot connect to the corporate VPN:

1. **Multi-modal Input Processing** [MCP Server]:
   - Text description of the issue
   - Screenshot of error message
   - System logs uploaded as file attachment

2. **Persona-Aware Interaction** [Qdrant + MCP Server]:
   - System recognizes user as technically proficient
   - Provides more detailed technical explanations
   - Offers advanced troubleshooting options

3. **Tool Discovery and Execution** [n8n + MCP Server]:
   - Network Diagnostics Tool identifies certificate expiration
   - Certificate Renewal Workflow is automatically triggered
   - Step-by-step guidance provided while certificate generates

4. **Continuous Learning** [Analytics Service]:
   - System notes pattern of certificate expirations
   - Recommends proactive renewal process improvement
   - Updates knowledge base with new resolution path

### New Employee Onboarding

An IT coordinator needs to set up systems for multiple new hires:

1. **Complex Input Understanding** [MCP Server]:
   - Processes spreadsheet of new employees and their roles
   - Extracts required access levels and software needs
   - Identifies department-specific requirements

2. **Context-Aware Planning** [MCP Server + Qdrant]:
   - Loads templates based on employee roles
   - Incorporates department-specific applications
   - Considers security policies and compliance requirements

3. **Orchestrated Execution** [n8n]:
   - Triggers parallel workflows for each new employee
   - Coordinates across multiple systems (AD, SAP, email)
   - Schedules sequential steps with dependencies

4. **Transparent Oversight** [TraceViewer + Grafana]:
   - Provides real-time progress dashboard
   - Highlights any blockers or delays
   - Offers estimated completion times

## Benefits for Allianz

1. **Improved Employee Productivity**: Faster resolution of IT issues means less downtime
2. **Cost Reduction**: Lower support costs through automation and self-service
3. **Better Resource Allocation**: IT specialists focus on complex problems and strategic initiatives
4. **Data-Driven Decisions**: Insights help prioritize IT investments and improvements
5. **Enhanced Security**: Consistent application of security policies in automated workflows
6. **Scalability**: System can handle support volume fluctuations without additional staffing

## Future Enhancements

1. **Predictive Support**: Anticipating issues before they affect employees [Analytics Service + MCP Server]
2. **Multilingual Support**: Extending the orchestrator to support all Allianz operating languages [MCP Server language models]
3. **Mobile Interface**: Dedicated mobile app for support on the go [Next.js mobile optimization]
4. **Hardware Diagnostics**: Integration with endpoint management tools for deeper diagnostics [n8n integration]
5. **Change Impact Analysis**: Predicting support volume based on planned system changes [Analytics Service]
